<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Administración Raíz Financiera</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="Administracion.css">

  <link rel="shortcut icon" href="#" type="image/x-icon" />
    <link rel="apple-touch-icon" href="#" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <!-- Pogo Slider CSS -->
    <link rel="stylesheet" href="css/pogo-slider.min.css" />
    <!-- Site CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css" />
    <!-- Custom CSS -->

    <link rel="stylesheet" href="css/chat.css" />
</head>

<body>
  <header class="bg-dark text-white p-3">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <h1 class="h3">Raíz Financiera - <span class="badge bg-primary">Panel de Administración</span></h1>


      <h2>
        <a href="/grupo"><span class="badge bg-primary">Grupo</span></a> 
        <a href="/Finanzas_Raiz"><span class="badge bg-success">Home</span></a> 
        <a href="/logout"><span class="badge bg-danger">Salir</span></a>
      </h2>
    </div>
  </header>

  <main class="container-fluid py-4">
    <ul class="nav nav-tabs" id="adminTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="usuarios-tab" data-bs-toggle="tab" data-bs-target="#usuarios" type="button"
          role="tab">Usuarios</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="contratos-tab" data-bs-toggle="tab" data-bs-target="#contratos" type="button"
          role="tab">Contratos</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="prestamos-tab" data-bs-toggle="tab" data-bs-target="#prestamos" type="button"
          role="tab">Préstamos</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="seguros-tab" data-bs-toggle="tab" data-bs-target="#seguros" type="button"
          role="tab">Seguros</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tarjetas-tab" data-bs-toggle="tab" data-bs-target="#tarjetas" type="button"
          role="tab">Tarjetas</button>
      </li>
    </ul>

    <div class="tab-content mt-4" id="adminTabContent">
      <!-- Usuarios -->
      <div class="tab-pane fade show active" id="usuarios" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-usuarios" class="form-label">Buscar por RUT o Email:</label>
          <input type="text" class="form-control" id="filtro-usuarios"
            placeholder="Ej: 12345678-9 o ejemplo@correo.com">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Nombres</th>
                <th>Apellidos</th>
                <th>RUT</th>
                <th>Documento</th>
                <th>Email</th>
                <th>Teléfono</th>
                <th>Rol</th>
              </tr>
            </thead>
            <tbody>
              <% usuarios.forEach(usuario=> { %>
                <tr>
                  <td>
                    <%= usuario.nombre1 %> <%= usuario.nombre1 %>
                  </td>
                  <td>
                    <%= usuario.apellido1 %> <%= usuario.apellido2 %>
                  </td>
                  <td>
                    <%= usuario.rut %>
                  </td>
                  <td>
                    <%= usuario.numero_documento %>
                  </td>
                  <td>
                    <%= usuario.email %>
                  </td>
                  <td>
                    <%= usuario.telefono %>
                  </td>
                  <td>
                    <% if (usuario.role === "admin") { %>
                      <span class="badge bg-primary"><%= usuario.role %></span>
                    <% } else if (usuario.role === "cliente") { %>
                      <span class="badge bg-warning"><%= usuario.role %></span>
                    <% } %>
                  </td>
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Contratos -->
      <div class="tab-pane fade" id="contratos" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-contratos" class="form-label">Buscar por número de tarjeta o estado:</label>
          <input type="text" class="form-control" id="filtro-contratos" placeholder="Ej: activa o 1234-5678-1234-5678">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>ID Usuario</th>
                <th>Cod Veridicador</th>
                <th>Nº Tarjeta</th>
                <th>F Expiracion</th>
                <th>CVV</th>
                <th>Limite Credito</th>
                <th>Estado</th>
                <th>F Emision</th>
              </tr>
            </thead>
            <tbody>
              <% contratos.forEach(contrato=> { %>
                <tr>
                  <td>
                    <%= contrato.user %>
                  </td>
                  <td>
                    <%= contrato.codigo_verificador %>
                  </td>
                  <td>
                    <%= contrato.numero_tarjeta %>
                  </td>
                  <td>
                    <span class="badge bg-primary"><%= contrato.fecha_expiracion %></span>
                  </td>
                  <td>
                    <%= contrato.cvv %>
                  </td>
                  <td>
                    <%= contrato.limite_credito %>
                  </td>
                  <td>
                    <% if (contrato.estado === "activa") { %>
                      <span class="badge bg-success"><%= contrato.estado %></span>
                    <% } else if (contrato.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= contrato.estado %></span>
                    <% } else if (contrato.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= contrato.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    
                    <%= new Date(contrato.fecha_emision).toLocaleDateString('es-CL') %>
                  </td>
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Préstamos -->
      <div class="tab-pane fade" id="prestamos" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-prestamos" class="form-label">Buscar por estado o monto:</label>
          <input type="text" class="form-control" id="filtro-prestamos" placeholder="Ej: aprobado o 500000">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Usuario</th>
                <th>Monto</th>
                <th>Plazo</th>
                <th>Interés</th>
                <th>Estado</th>
                <th>Solicitud</th>
              </tr>
            </thead>
            <tbody id="tabla-prestamos">
              <!-- Datos de préstamos -->
               <% prestamos.forEach(prestamo=> { %>
                <tr>
                  <td>
                    <%= prestamo.user %>
                  </td>
                  <td>
                    <%= prestamo.monto %>
                  </td>
                  <td>
                    <%= prestamo.plazo_meses %>
                  </td>
                  <td>
                    <%= prestamo.tasa_interes %>
                  </td>
                  <td>
                    <% if (prestamo.estado === "activa") { %>
                      <span class="badge bg-success"><%= prestamo.estado %></span>
                    <% } else if (prestamo.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= prestamo.estado %></span>
                    <% } else if (prestamo.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= prestamo.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    
                    <%= new Date(prestamo.fecha_solicitud).toLocaleDateString('es-CL') %>
                  </td>
                  <td>
                    
                    <%= new Date(prestamo.fecha_aprobacion).toLocaleDateString('es-CL') %>
                  </td>
                  <td>
                    
                    <%= new Date(prestamo.fecha_vencimiento).toLocaleDateString('es-CL') %>
                  </td>
                  
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Seguros -->
      <div class="tab-pane fade" id="seguros" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-seguros" class="form-label">Buscar por tipo o estado:</label>
          <input type="text" class="form-control" id="filtro-seguros" placeholder="Ej: vida o vencido">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Usuario</th>
                <th>Tipo Seguro</th>
                <th>Monto Cobertura</th>
                <th>Prima Mensual</th>
                <th>Estado</th>
                <th>Fecha Inicio</th>
                <th>Fecha Vencimiento</th>
              </tr>
            </thead>
            <tbody id="tabla-seguros">
              <!-- Datos de seguros -->
               <% seguros.forEach(seguro=> { %>
                <tr>
                  <td>
                    <%= seguro.user %>
                  </td>
                  <td>
                    <%= seguro.tipo_seguro %>
                  </td>
                  <td>
                    <%= seguro.monto_cobertura %>
                  </td>
                  <td>
                    <%= seguro.prima_mensual %>
                  </td>
                  <td>
                    <% if (seguro.estado === "activa") { %>
                      <span class="badge bg-success"><%= seguro.estado %></span>
                    <% } else if (seguro.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= seguro.estado %></span>
                    <% } else if (seguro.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= seguro.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    
                    <%= new Date(seguro.fecha_inicio).toLocaleDateString('es-CL') %>
                  </td>
                  <td>
                    
                    <%= new Date(seguro.fecha_vencimiento).toLocaleDateString('es-CL') %>
                  </td>
                  
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tarjetas -->
      <div class="tab-pane fade" id="tarjetas" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-tarjetas" class="form-label">Buscar por estado o tarjeta:</label>
          <input type="text" class="form-control" id="filtro-tarjetas"
            placeholder="Ej: bloqueada o 1111-2222-3333-4444">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Usuario</th>
                <th>N° Tarjeta</th>
                <th>Fecha Expiracion</th>
                <th>CVV</th>
                <th>Crédito</th> 
                <th>Estado</th>
                <th>Fecha Emisión</th>
              </tr>
            </thead>
            <tbody id="tabla-tarjetas">
              <!-- Datos de tarjetas -->
              <% tarjetas.forEach(tarjeta=> { %>
                <tr>
                  <td>
                    <%= tarjeta.user %>
                  </td>
                  <td>
                    <%= tarjeta.numero_tarjeta %>
                  </td>
                  <td>
                    
                    <%= new Date(tarjeta.fecha_expiracion).toLocaleDateString('es-CL') %>
                  </td>
                  <td>
                    <%= tarjeta.cvv %>
                  </td>
                  <td>
                    <%= tarjeta.limite_credito %>
                  </td>
                  <td>
                    <% if (tarjeta.estado === "activa") { %>
                      <span class="badge bg-success"><%= tarjeta.estado %></span>
                    <% } else if (tarjeta.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= tarjeta.estado %></span>
                    <% } else if (tarjeta.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= tarjeta.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    
                    <%= new Date(tarjeta.fecha_emision).toLocaleDateString('es-CL') %>
                  </td>
                  
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>
   <!-- Start Footer -->
    <footer class="footer-box">
        <div class="container">
            <div class="row">
                <div class="col-md-12 white_fonts">
                    <div class="row">
                        <div class="col-sm-6 col-md-6 col-lg-3">
                            <div class="full">
                                <img class="img-responsive" src="images/back/Logo_Cuadro.webp" alt="#" />
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6 col-lg-3">
                            <div class="full">
                                <h3>Enlaces Rápidos</h3>
                            </div>
                            <div class="full">
                                <ul class="menu_footer">
                                    <li><a href="home.html">> Nosotros</a></li>
                                    <li><a href="about.html">> Acerda de</a></li>
                                    <li><a href="exchange.html">> Intercambio</a></li>
                                    <li><a href="services.html">> Servicios</a></li>
                                    <li><a href="new.html">> Proximamente</a></li>
                                    <li><a href="contact.html">> Contacto</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6 col-lg-3">
                            <div class="full">
                                <div class="footer_blog full white_fonts">
                                    <h3>Noticias</h3>
                                    <p>No te pierdas ninguna novedad! Inscríbete con tu correo y recibe las últimas
                                        noticias, productos y oportunidades de nuestro banco financiero.</p>
                                    <div class="newsletter_form">
                                        <form action="index.html">
                                            <input type="email" placeholder="Ingresa Tu Correo" name="#" required="">
                                            <button>Subir</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6 col-lg-3">
                            <div class="full">
                                <div class="footer_blog full white_fonts">
                                    <h3>Contactanos</h3>
                                    <ul class="full">
                                        <li><img src="images/i5.png"><span> Avenida Central 1234<br>Santiago,
                                                Chile</span></li>
                                        <li><img src="images/i6.png"><span>RaizFinanciera@gmail.com</span></li>
                                        <li><img src="images/i7.png"><span>+56978449038</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


  <script src="../../../js/Administracion.js"></script>


</body>

</html>
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Administración Raíz Financiera</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="Administracion.css">
</head>

<body>
  <header class="bg-dark text-white p-3">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <h1 class="h3">Raíz Financiera - <span class="badge bg-primary">Panel de Administración</span></h1>


      <h3><a href="/Finanzas_Raiz"><span class="badge bg-warning">Home</span></a> <a href="/logout"><span
            class="badge bg-danger">Salir</span></a></h3>
    </div>
  </header>

  <main class="container-fluid py-4">
    <ul class="nav nav-tabs" id="adminTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="usuarios-tab" data-bs-toggle="tab" data-bs-target="#usuarios" type="button"
          role="tab">Usuarios</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="contratos-tab" data-bs-toggle="tab" data-bs-target="#contratos" type="button"
          role="tab">Contratos</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="prestamos-tab" data-bs-toggle="tab" data-bs-target="#prestamos" type="button"
          role="tab">Préstamos</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="seguros-tab" data-bs-toggle="tab" data-bs-target="#seguros" type="button"
          role="tab">Seguros</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="tarjetas-tab" data-bs-toggle="tab" data-bs-target="#tarjetas" type="button"
          role="tab">Tarjetas</button>
      </li>
    </ul>

    <div class="tab-content mt-4" id="adminTabContent">
      <!-- Usuarios -->
      <div class="tab-pane fade show active" id="usuarios" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-usuarios" class="form-label">Buscar por RUT o Email:</label>
          <input type="text" class="form-control" id="filtro-usuarios"
            placeholder="Ej: 12345678-9 o ejemplo@correo.com">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Nombres</th>
                <th>Apellidos</th>
                <th>RUT</th>
                <th>Documento</th>
                <th>Email</th>
                <th>Teléfono</th>
                <th>Rol</th>
              </tr>
            </thead>
            <tbody>
              <% usuarios.forEach(usuario=> { %>
                <tr>
                  <td>
                    <%= usuario.nombre1 %> <%= usuario.nombre1 %>
                  </td>
                  <td>
                    <%= usuario.apellido1 %> <%= usuario.apellido2 %>
                  </td>
                  <td>
                    <%= usuario.rut %>
                  </td>
                  <td>
                    <%= usuario.numero_documento %>
                  </td>
                  <td>
                    <%= usuario.email %>
                  </td>
                  <td>
                    <%= usuario.telefono %>
                  </td>
                  <td>
                    <% if (usuario.role === "admin") { %>
                      <span class="badge bg-primary"><%= usuario.role %></span>
                    <% } else if (usuario.role === "cliente") { %>
                      <span class="badge bg-warning"><%= usuario.role %></span>
                    <% } %>
                  </td>
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Contratos -->
      <div class="tab-pane fade" id="contratos" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-contratos" class="form-label">Buscar por número de tarjeta o estado:</label>
          <input type="text" class="form-control" id="filtro-contratos" placeholder="Ej: activa o 1234-5678-1234-5678">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>ID Usuario</th>
                <th>Cod Veridicador</th>
                <th>Nº Tarjeta</th>
                <th>F Expiracion</th>
                <th>CVV</th>
                <th>Limite Credito</th>
                <th>Estado</th>
                <th>F Emision</th>
              </tr>
            </thead>
            <tbody>
              <% contratos.forEach(contrato=> { %>
                <tr>
                  <td>
                    <%= contrato.user %>
                  </td>
                  <td>
                    <%= contrato.codigo_verificador %>
                  </td>
                  <td>
                    <%= contrato.numero_tarjeta %>
                  </td>
                  <td>
                    <span class="badge bg-primary"><%= contrato.fecha_expiracion %></span>
                  </td>
                  <td>
                    <%= contrato.cvv %>
                  </td>
                  <td>
                    <%= contrato.limite_credito %>
                  </td>
                  <td>
                    <% if (contrato.estado === "activa") { %>
                      <span class="badge bg-success"><%= contrato.estado %></span>
                    <% } else if (contrato.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= contrato.estado %></span>
                    <% } else if (contrato.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= contrato.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    <%= contrato.fecha_emision %>
                  </td>
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Préstamos -->
      <div class="tab-pane fade" id="prestamos" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-prestamos" class="form-label">Buscar por estado o monto:</label>
          <input type="text" class="form-control" id="filtro-prestamos" placeholder="Ej: aprobado o 500000">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Usuario</th>
                <th>Monto</th>
                <th>Plazo</th>
                <th>Interés</th>
                <th>Estado</th>
                <th>Solicitud</th>
              </tr>
            </thead>
            <tbody id="tabla-prestamos">
              <!-- Datos de préstamos -->
               <% prestamos.forEach(prestamo=> { %>
                <tr>
                  <td>
                    <%= prestamo.user %>
                  </td>
                  <td>
                    <%= prestamo.monto %>
                  </td>
                  <td>
                    <%= prestamo.plazo_meses %>
                  </td>
                  <td>
                    <%= prestamo.tasa_interes %>
                  </td>
                  <td>
                    <% if (prestamo.estado === "activa") { %>
                      <span class="badge bg-success"><%= prestamo.estado %></span>
                    <% } else if (prestamo.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= prestamo.estado %></span>
                    <% } else if (prestamo.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= prestamo.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    <%= prestamo.fecha_solicitud %>
                  </td>
                  <td>
                    <%= prestamo.fecha_aprobacion %>
                  </td>
                  <td>
                    <%= prestamo.fecha_vencimiento %>
                  </td>
                  
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Seguros -->
      <div class="tab-pane fade" id="seguros" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-seguros" class="form-label">Buscar por tipo o estado:</label>
          <input type="text" class="form-control" id="filtro-seguros" placeholder="Ej: vida o vencido">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Usuario</th>
                <th>Tipo Seguro</th>
                <th>Monto Cobertura</th>
                <th>Prima Mensual</th>
                <th>Estado</th>
                <th>Fecha Inicio</th>
                <th>Fecha Vencimiento</th>
              </tr>
            </thead>
            <tbody id="tabla-seguros">
              <!-- Datos de seguros -->
               <% seguros.forEach(seguro=> { %>
                <tr>
                  <td>
                    <%= seguro.user %>
                  </td>
                  <td>
                    <%= seguro.tipo_seguro %>
                  </td>
                  <td>
                    <%= seguro.monto_cobertura %>
                  </td>
                  <td>
                    <%= seguro.prima_mensual %>
                  </td>
                  <td>
                    <% if (seguro.estado === "activa") { %>
                      <span class="badge bg-success"><%= seguro.estado %></span>
                    <% } else if (seguro.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= seguro.estado %></span>
                    <% } else if (seguro.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= seguro.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    <%= seguro.fecha_inicio %>
                  </td>
                  <td>
                    <%= seguro.fecha_vencimiento %>
                  </td>
                  
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tarjetas -->
      <div class="tab-pane fade" id="tarjetas" role="tabpanel">
        <div class="mb-3">
          <label for="filtro-tarjetas" class="form-label">Buscar por estado o tarjeta:</label>
          <input type="text" class="form-control" id="filtro-tarjetas"
            placeholder="Ej: bloqueada o 1111-2222-3333-4444">
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Usuario</th>
                <th>N° Tarjeta</th>
                <th>Fecha Expiracion</th>
                <th>CVV</th>
                <th>Crédito</th> 
                <th>Estado</th>
                <th>Fecha Emisión</th>
              </tr>
            </thead>
            <tbody id="tabla-tarjetas">
              <!-- Datos de tarjetas -->
              <% tarjetas.forEach(tarjeta=> { %>
                <tr>
                  <td>
                    <%= tarjeta.user %>
                  </td>
                  <td>
                    <%= tarjeta.numero_tarjeta %>
                  </td>
                  <td>
                    <%= tarjeta.fecha_expiracion %>
                  </td>
                  <td>
                    <%= tarjeta.cvv %>
                  </td>
                  <td>
                    <%= tarjeta.limite_credito %>
                  </td>
                  <td>
                    <% if (tarjeta.estado === "activa") { %>
                      <span class="badge bg-success"><%= tarjeta.estado %></span>
                    <% } else if (tarjeta.estado === "bloqueada") { %>
                      <span class="badge bg-danger"><%= tarjeta.estado %></span>
                    <% } else if (tarjeta.estado === "vencida") { %>
                      <span class="badge bg-warning text-dark"><%= tarjeta.estado %></span>
                    <% } %>
                  </td>
                  <td>
                    <%= tarjeta.fecha_emision %>
                  </td>
                  
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <footer class="text-center text-muted py-3 bg-light">
    <small>&copy; 2025 Raíz Financiera. Todos los derechos reservados.</small>
  </footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


  <script src="../../../js/Administracion.js"></script>


</body>

</html>